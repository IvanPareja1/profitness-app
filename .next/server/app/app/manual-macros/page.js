(()=>{var e={};e.id=424,e.ids=[424],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},57310:e=>{"use strict";e.exports=require("url")},73423:e=>{e.exports={style:{fontFamily:"'__Inter_e8ce0c', '__Inter_Fallback_e8ce0c'",fontStyle:"normal"},className:"__className_e8ce0c",variable:"__variable_e8ce0c"}},14880:e=>{e.exports={style:{fontFamily:"'__Pacifico_5f64cf', '__Pacifico_Fallback_5f64cf'",fontWeight:400,fontStyle:"normal"},className:"__className_5f64cf",variable:"__variable_5f64cf"}},82967:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>o});var s=t(67096),r=t(16132),i=t(37284),l=t.n(i),n=t(32564),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(a,c);let o=["",{children:["app",{children:["manual-macros",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,45450)),"C:\\Users\\biges\\OneDrive\\Escritorio\\profitnessapp\\app\\app\\manual-macros\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,64771)),"C:\\Users\\biges\\OneDrive\\Escritorio\\profitnessapp\\app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,42624)),"C:\\Users\\biges\\OneDrive\\Escritorio\\profitnessapp\\app\\app\\not-found.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,35345)),"C:\\Users\\biges\\OneDrive\\Escritorio\\profitnessapp\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,44293)),"C:\\Users\\biges\\OneDrive\\Escritorio\\profitnessapp\\app\\not-found.tsx"]}],d=["C:\\Users\\biges\\OneDrive\\Escritorio\\profitnessapp\\app\\app\\manual-macros\\page.tsx"],m="/app/manual-macros/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/app/manual-macros/page",pathname:"/app/manual-macros",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},62190:(e,a,t)=>{Promise.resolve().then(t.bind(t,97212))},97212:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>ManualMacrosPage});var s=t(30784),r=t(9885),i=t(11440),l=t.n(i);!function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}();var n=t(57114);function ManualMacrosPage(){let[e,a]=(0,r.useState)(null),[t,i]=(0,r.useState)(!0),[c,o]=(0,r.useState)(!1),[d,m]=(0,r.useState)(""),[x,u]=(0,r.useState)({target_calories:2e3,target_protein:150,target_carbs:200,target_fat:70}),[g,h]=(0,r.useState)(!0),[p,f]=(0,r.useState)({age:25,height:165,weight:65,gender:"female",activity_level:"moderate",goal:"maintain"}),[b,j]=(0,r.useState)(""),v=(0,n.useRouter)();(0,r.useEffect)(()=>{initializeUser()},[]),(0,r.useEffect)(()=>{g&&p.age&&p.height&&p.weight&&calculateAutoMacros()},[g,p,b]);let initializeUser=async()=>{try{let e=await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}())();if(!e){v.push("/auth");return}a(e),await loadUserData(e.id)}catch(e){console.error("Error initializing user:",e),v.push("/auth")}finally{i(!1)}},loadUserData=async e=>{try{let a=(await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).auth.getSession()).data.session?.access_token,t=await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}())("user-profile",{action:"get_profile",userId:e},a);if(t.user){let e=t.user;f({age:e.age||25,height:e.height||165,weight:e.weight||65,gender:e.gender||"female",activity_level:e.activity_level||"moderate",goal:e.goal||"maintain"}),u({target_calories:e.target_calories||2e3,target_protein:e.target_protein||150,target_carbs:e.target_carbs||200,target_fat:e.target_fat||70})}"female"===p.gender&&await loadCyclePhase(e)}catch(e){console.error("Error loading user data:",e)}},loadCyclePhase=async e=>{try{let{data:a}=await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("menstrual_cycle").select("*").eq("user_id",e).eq("tracking_enabled",!0).single();if(a&&a.last_period){let e=new Date(a.last_period),t=new Date,s=Math.floor((t.getTime()-e.getTime())/864e5);s>=0&&s<=a.cycle_length&&(s<=a.period_length?j("menstrual"):s<=13?j("follicular"):s<=17?j("ovulation"):j("luteal"))}}catch(e){console.error("Error loading cycle phase:",e)}},calculateAutoMacros=()=>{let e=("male"===p.gender?88.362+13.397*p.weight+4.799*p.height-5.677*p.age:447.593+9.247*p.weight+3.098*p.height-4.33*p.age)*({sedentary:1.2,light:1.375,moderate:1.55,active:1.725,very_active:1.9})[p.activity_level];if("lose"===p.goal?e*=.85:"gain"===p.goal&&(e*=1.15),"female"===p.gender&&b)switch(b){case"menstrual":e*=1.05;break;case"luteal":e*=1.08}let a=Math.round(e),t=Math.round(2.2*p.weight),s=Math.round(.25*a/9);u({target_calories:a,target_protein:t,target_carbs:Math.round((a-4*t-9*s)/4),target_fat:s})},handleMacroChange=(e,a)=>{let t=parseInt(a)||0;u(a=>({...a,[e]:t}))},handleSave=async()=>{if(e)try{o(!0),m("");let a=(await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).auth.getSession()).data.session?.access_token,t=await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}())("user-macros-manager",{action:"update_macros",userId:e.id,macros:x},a);t.success&&(m("✓ Metas guardadas correctamente"),setTimeout(()=>m(""),3e3))}catch(e){console.error("Error saving macros:",e),m("Error al guardar las metas. Intenta nuevamente."),setTimeout(()=>m(""),3e3)}finally{o(!1)}},getCyclePhaseInfo=()=>({menstrual:{name:"Menstrual",color:"text-red-500",icon:"ri-drop-line",tip:"Aumenta ligeramente las calor\xedas y el hierro"},follicular:{name:"Folicular",color:"text-green-500",icon:"ri-leaf-line",tip:"Excelente momento para entrenar intenso"},ovulation:{name:"Ovulaci\xf3n",color:"text-yellow-500",icon:"ri-sun-line",tip:"Pico de energ\xeda, aprovecha para ejercicios de fuerza"},luteal:{name:"L\xfatea",color:"text-purple-500",icon:"ri-moon-line",tip:"Aumenta carbohidratos complejos y magnesio"}})[b];if(t)return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-green-200 border-t-green-500 rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Cargando configuraci\xf3n..."})]})});let N=(()=>{let e=x.target_calories,a=4*x.target_protein,t=4*x.target_carbs,s=9*x.target_fat;return{protein:e>0?Math.round(a/e*100):0,carbs:e>0?Math.round(t/e*100):0,fat:e>0?Math.round(s/e*100):0}})();return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50",children:[s.jsx("div",{className:"fixed top-0 left-0 right-0 glass z-20 safe-top",children:(0,s.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[s.jsx(l(),{href:"/profile",className:"w-8 h-8 flex items-center justify-center",children:s.jsx("i",{className:"ri-arrow-left-line text-gray-600 text-xl"})}),s.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:"Ajuste de Metas"})]}),s.jsx("button",{onClick:handleSave,disabled:c,className:"btn-primary text-sm",children:c?"Guardando...":"Guardar"})]})}),(0,s.jsxs)("div",{className:"pt-24 pb-24 px-4",children:[d&&s.jsx("div",{className:`mb-4 p-3 rounded-xl text-center font-medium ${d.includes("✓")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:d}),(0,s.jsxs)("div",{className:"card mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Modo de Configuraci\xf3n"}),s.jsx("p",{className:"text-sm text-gray-600",children:g?"C\xe1lculo autom\xe1tico basado en tu perfil":"Configuraci\xf3n manual personalizada"})]}),s.jsx("button",{onClick:()=>h(!g),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${g?"bg-green-500":"bg-gray-200"}`,children:s.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${g?"translate-x-6":"translate-x-1"}`})})]}),g&&s.jsx("div",{className:"bg-green-50 rounded-xl p-4",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[s.jsx("i",{className:"ri-information-line text-green-500 mt-0.5"}),(0,s.jsxs)("div",{className:"text-sm text-green-700",children:[s.jsx("p",{className:"font-medium mb-1",children:"C\xe1lculo autom\xe1tico activado"}),(0,s.jsxs)("p",{children:["Las metas se calculan usando tu perfil: ",p.age," a\xf1os, ",p.height,"cm, ",p.weight,"kg, nivel ",p.activity_level,", objetivo ",p.goal,"."]})]})]})})]}),"female"===p.gender&&b&&(0,s.jsxs)("div",{className:"card mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Fase del Ciclo Menstrual"}),(0,s.jsxs)("div",{className:"bg-purple-50 rounded-xl p-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${getCyclePhaseInfo()?.color==="text-red-500"?"bg-red-100":getCyclePhaseInfo()?.color==="text-green-500"?"bg-green-100":getCyclePhaseInfo()?.color==="text-yellow-500"?"bg-yellow-100":"bg-purple-100"}`,children:s.jsx("i",{className:`${getCyclePhaseInfo()?.icon} ${getCyclePhaseInfo()?.color} text-lg`})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"font-semibold text-gray-800",children:["Fase ",getCyclePhaseInfo()?.name]}),s.jsx("div",{className:"text-sm text-gray-600",children:getCyclePhaseInfo()?.tip})]})]}),s.jsx("p",{className:"text-xs text-purple-600",children:"Las metas se ajustan autom\xe1ticamente seg\xfan tu fase del ciclo para optimizar tu bienestar."})]})]}),(0,s.jsxs)("div",{className:"card mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Meta Cal\xf3rica Diaria"}),(0,s.jsxs)("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"text-4xl font-bold text-green-600 mb-2",children:x.target_calories.toLocaleString()}),s.jsx("div",{className:"text-sm text-gray-600",children:"calor\xedas por d\xeda"})]}),!g&&(0,s.jsxs)("div",{children:[s.jsx("input",{type:"range",min:"1200",max:"4000",step:"50",value:x.target_calories,onChange:e=>handleMacroChange("target_calories",e.target.value),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),(0,s.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[s.jsx("span",{children:"1,200"}),s.jsx("span",{children:"4,000"})]})]})]}),(0,s.jsxs)("div",{className:"card mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Distribuci\xf3n de Macronutrientes"}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-full"}),s.jsx("span",{className:"font-medium text-gray-800",children:"Prote\xednas"})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"font-bold text-blue-600",children:[x.target_protein,"g"]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:[N.protein,"%"]})]})]}),!g&&s.jsx("input",{type:"range",min:"50",max:"300",step:"5",value:x.target_protein,onChange:e=>handleMacroChange("target_protein",e.target.value),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 bg-green-500 rounded-full"}),s.jsx("span",{className:"font-medium text-gray-800",children:"Carbohidratos"})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"font-bold text-green-600",children:[x.target_carbs,"g"]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:[N.carbs,"%"]})]})]}),!g&&s.jsx("input",{type:"range",min:"50",max:"400",step:"5",value:x.target_carbs,onChange:e=>handleMacroChange("target_carbs",e.target.value),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded-full"}),s.jsx("span",{className:"font-medium text-gray-800",children:"Grasas"})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"font-bold text-yellow-600",children:[x.target_fat,"g"]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:[N.fat,"%"]})]})]}),!g&&s.jsx("input",{type:"range",min:"20",max:"150",step:"5",value:x.target_fat,onChange:e=>handleMacroChange("target_fat",e.target.value),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),(0,s.jsxs)("div",{className:"mt-6",children:[s.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Distribuci\xf3n Visual"}),(0,s.jsxs)("div",{className:"flex h-4 rounded-full overflow-hidden bg-gray-200",children:[s.jsx("div",{className:"bg-blue-500 transition-all duration-300",style:{width:`${N.protein}%`}}),s.jsx("div",{className:"bg-green-500 transition-all duration-300",style:{width:`${N.carbs}%`}}),s.jsx("div",{className:"bg-yellow-500 transition-all duration-300",style:{width:`${N.fat}%`}})]})]})]}),(0,s.jsxs)("div",{className:"card",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Recomendaciones Nutricionales"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:s.jsx("i",{className:"ri-heart-line text-green-500 text-xs"})}),(0,s.jsxs)("div",{className:"text-sm text-gray-700",children:[s.jsx("p",{className:"font-medium",children:"Hidrataci\xf3n"}),(0,s.jsxs)("p",{children:["Consume al menos ",Math.round(35*p.weight),"ml de agua por d\xeda (35ml por kg de peso corporal)."]})]})]}),(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:s.jsx("i",{className:"ri-time-line text-blue-500 text-xs"})}),(0,s.jsxs)("div",{className:"text-sm text-gray-700",children:[s.jsx("p",{className:"font-medium",children:"Timing de Comidas"}),s.jsx("p",{children:"Distribuye las comidas en 4-6 porciones durante el d\xeda para mantener estables los niveles de energ\xeda."})]})]}),(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:s.jsx("i",{className:"ri-leaf-line text-purple-500 text-xs"})}),(0,s.jsxs)("div",{className:"text-sm text-gray-700",children:[s.jsx("p",{className:"font-medium",children:"Calidad de Alimentos"}),s.jsx("p",{children:"Prioriza alimentos enteros, m\xednimamente procesados y con alta densidad nutricional."})]})]})]})]})]}),s.jsx("div",{className:"fixed bottom-0 left-0 right-0 glass border-t border-gray-200/50 safe-bottom",children:(0,s.jsxs)("div",{className:"grid grid-cols-5 py-2",children:[(0,s.jsxs)(l(),{href:"/",className:"flex flex-col items-center justify-center py-2",children:[s.jsx("i",{className:"ri-home-line nav-inactive text-lg"}),s.jsx("span",{className:"text-xs nav-inactive mt-1",children:"Inicio"})]}),(0,s.jsxs)(l(),{href:"/nutrition",className:"flex flex-col items-center justify-center py-2",children:[s.jsx("i",{className:"ri-restaurant-line nav-inactive text-lg"}),s.jsx("span",{className:"text-xs nav-inactive mt-1",children:"Comida"})]}),s.jsx(l(),{href:"/scan",className:"flex flex-col items-center justify-center py-2",children:s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-green-600 rounded-full flex items-center justify-center shadow-lg",children:s.jsx("i",{className:"ri-qr-scan-2-line text-white text-lg"})})}),(0,s.jsxs)(l(),{href:"/reports",className:"flex flex-col items-center justify-center py-2",children:[s.jsx("i",{className:"ri-bar-chart-line nav-inactive text-lg"}),s.jsx("span",{className:"text-xs nav-inactive mt-1",children:"Reportes"})]}),(0,s.jsxs)(l(),{href:"/profile",className:"flex flex-col items-center justify-center py-2",children:[s.jsx("i",{className:"ri-user-line nav-inactive text-lg"}),s.jsx("span",{className:"text-xs nav-inactive mt-1",children:"Perfil"})]})]})})]})}},45450:(e,a,t)=>{"use strict";t.r(a),t.d(a,{$$typeof:()=>l,__esModule:()=>i,default:()=>c});var s=t(95153);let r=(0,s.createProxy)(String.raw`C:\Users\biges\OneDrive\Escritorio\profitnessapp\app\app\manual-macros\page.tsx`),{__esModule:i,$$typeof:l}=r,n=r.default,c=n},57114:(e,a,t)=>{e.exports=t(4979)}};var a=require("../../../webpack-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),t=a.X(0,[621,825,539],()=>__webpack_exec__(82967));module.exports=t})();