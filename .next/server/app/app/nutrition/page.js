(()=>{var e={};e.id=223,e.ids=[223],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},57310:e=>{"use strict";e.exports=require("url")},73423:e=>{e.exports={style:{fontFamily:"'__Inter_e8ce0c', '__Inter_Fallback_e8ce0c'",fontStyle:"normal"},className:"__className_e8ce0c",variable:"__variable_e8ce0c"}},14880:e=>{e.exports={style:{fontFamily:"'__Pacifico_5f64cf', '__Pacifico_Fallback_5f64cf'",fontWeight:400,fontStyle:"normal"},className:"__className_5f64cf",variable:"__variable_5f64cf"}},37500:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>d,routeModule:()=>u,tree:()=>c});var r=s(67096),a=s(16132),i=s(37284),n=s.n(i),l=s(32564),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["app",{children:["nutrition",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,93727)),"C:\\Users\\biges\\OneDrive\\Escritorio\\profitnessapp\\app\\app\\nutrition\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,64771)),"C:\\Users\\biges\\OneDrive\\Escritorio\\profitnessapp\\app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,42624)),"C:\\Users\\biges\\OneDrive\\Escritorio\\profitnessapp\\app\\app\\not-found.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,35345)),"C:\\Users\\biges\\OneDrive\\Escritorio\\profitnessapp\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,44293)),"C:\\Users\\biges\\OneDrive\\Escritorio\\profitnessapp\\app\\not-found.tsx"]}],d=["C:\\Users\\biges\\OneDrive\\Escritorio\\profitnessapp\\app\\app\\nutrition\\page.tsx"],x="/app/nutrition/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/app/nutrition/page",pathname:"/app/nutrition",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},14856:(e,t,s)=>{Promise.resolve().then(s.bind(s,8742))},8742:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>NutritionPage});var r=s(30784),a=s(9885),i=s(11440),n=s.n(i);!function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}();var l=s(57114);function NutritionPage(){let[e,t]=(0,a.useState)(new Date().toISOString().split("T")[0]),[s,i]=(0,a.useState)({calories:0,protein:0,carbs:0,fat:0,fiber:0,hydration:0,target_calories:2e3,target_protein:120,target_carbs:250,target_fat:67,target_fiber:25,target_hydration:2500}),[o,c]=(0,a.useState)([]),[d,x]=(0,a.useState)(!0),[m,u]=(0,a.useState)(null),g=(0,l.useRouter)();(0,a.useEffect)(()=>{initializeUser()},[]),(0,a.useEffect)(()=>{m&&loadNutritionData(m.id,e)},[e,m]);let initializeUser=async()=>{try{let e=await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}())();if(!e){g.push("/auth");return}u(e)}catch(e){console.error("Error initializing user:",e),g.push("/auth")}finally{x(!1)}},loadNutritionData=async(e,t)=>{try{let e=(await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).auth.getSession()).data.session?.access_token,s=await fetch(`${process.env.NEXT_PUBLIC_SUPABASE_URL}/functions/v1/nutrition-tracker?date=${t}`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!s.ok)throw Error("Error loading nutrition data");let r=await s.json();r.dailyNutrition&&i({calories:r.dailyNutrition.total_calories||0,protein:r.dailyNutrition.total_protein||0,carbs:r.dailyNutrition.total_carbs||0,fat:r.dailyNutrition.total_fat||0,fiber:r.dailyNutrition.total_fiber||0,hydration:r.dailyNutrition.total_hydration||0,target_calories:r.targets?.target_calories||2e3,target_protein:r.targets?.target_protein||120,target_carbs:r.targets?.target_carbs||250,target_fat:r.targets?.target_fat||67,target_fiber:r.targets?.target_fiber||25,target_hydration:r.targets?.target_hydration||2500}),r.foodEntries&&c(r.foodEntries.map(e=>({id:e.id,food_name:e.food_name,calories:e.calories,protein:e.protein||0,carbs:e.carbs||0,fat:e.fat||0,fiber:e.fiber||0,meal_type:e.meal_type,consumed_at:e.created_at})))}catch(e){console.error("Error loading nutrition:",e)}},updateHydration=async t=>{if(m)try{let s=(await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).auth.getSession()).data.session?.access_token;await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}())("hydration-tracker",{action:t>0?"add":"subtract",amount:Math.abs(t),date:e},s),await loadNutritionData(m.id,e)}catch(e){console.error("Error updating hydration:",e)}},updateFiber=async t=>{if(m)try{let s=(await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).auth.getSession()).data.session?.access_token;await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}())("nutrition-tracker",{action:"update_fiber",amount:t,date:e},s),await loadNutritionData(m.id,e)}catch(e){console.error("Error updating fiber:",e)}},getProgressWidth=(e,t)=>Math.min(e/t*100,100);return d?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"w-12 h-12 border-4 border-blue-200 border-t-blue-500 rounded-full animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Cargando informaci\xf3n nutricional..."})]})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50",children:[r.jsx("header",{className:"fixed top-0 left-0 right-0 bg-white/95 backdrop-blur-sm shadow-sm z-10",children:r.jsx("div",{className:"flex items-center justify-between p-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx(n(),{href:"/",className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100",children:r.jsx("i",{className:"ri-arrow-left-line text-gray-600 text-xl"})}),r.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:"Nutrici\xf3n"})]})})}),(0,r.jsxs)("main",{className:"pt-20 pb-20 px-4",children:[(0,r.jsxs)("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100 mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha"}),r.jsx("input",{type:"date",value:e,onChange:e=>t(e.target.value),className:"w-full p-3 border border-gray-300 rounded-xl bg-white text-gray-800"}),r.jsx("p",{className:"text-xs text-gray-500 mt-2 capitalize",children:(e=>{let t=new Date(e);return t.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})(e)})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Resumen Nutricional"}),(0,r.jsxs)(n(),{href:"/manual-macros",className:"flex items-center space-x-2 px-3 py-2 bg-blue-50 text-blue-600 rounded-xl text-sm font-medium hover:bg-blue-100",children:[r.jsx("i",{className:"ri-settings-line"}),r.jsx("span",{children:"Ajustar Metas"})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"font-medium text-gray-700",children:"Calor\xedas"}),(0,r.jsxs)("span",{className:"font-bold text-gray-800",children:[s.calories," / ",s.target_calories]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-gradient-to-r from-blue-400 to-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${getProgressWidth(s.calories,s.target_calories)}%`}})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2",children:r.jsx("i",{className:"ri-bread-line text-green-600"})}),r.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Prote\xednas"}),(0,r.jsxs)("p",{className:"font-bold text-green-600",children:[s.protein,"g"]}),(0,r.jsxs)("p",{className:"text-xs text-gray-400",children:["de ",s.target_protein,"g"]})]}),(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-2",children:r.jsx("i",{className:"ri-restaurant-line text-yellow-600"})}),r.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Carbohidratos"}),(0,r.jsxs)("p",{className:"font-bold text-yellow-600",children:[s.carbs,"g"]}),(0,r.jsxs)("p",{className:"text-xs text-gray-400",children:["de ",s.target_carbs,"g"]})]}),(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-2",children:r.jsx("i",{className:"ri-drop-line text-purple-600"})}),r.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Grasas"}),(0,r.jsxs)("p",{className:"font-bold text-purple-600",children:[s.fat,"g"]}),(0,r.jsxs)("p",{className:"text-xs text-gray-400",children:["de ",s.target_fat,"g"]})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("i",{className:"ri-drop-line text-cyan-500"}),r.jsx("span",{className:"font-medium text-gray-700",children:"Hidrataci\xf3n"})]}),r.jsx("button",{className:"w-8 h-8 flex items-center justify-center bg-gray-100 rounded-full",children:r.jsx("i",{className:"ri-settings-line text-gray-600"})})]}),(0,r.jsxs)("p",{className:"text-xl font-bold text-cyan-600 mb-1",children:[s.hydration,"ml"]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mb-3",children:["de ",s.target_hydration,"ml"]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-3",children:r.jsx("div",{className:"bg-gradient-to-r from-cyan-400 to-cyan-600 h-2 rounded-full transition-all duration-300",style:{width:`${getProgressWidth(s.hydration,s.target_hydration)}%`}})}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>updateHydration(250),className:"flex-1 bg-cyan-500 text-white py-2 rounded-xl text-sm font-medium",children:"+250ml"}),r.jsx("button",{onClick:()=>updateHydration(-250),className:"flex-1 border border-gray-300 text-gray-600 py-2 rounded-xl text-sm font-medium",children:"-250ml"})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[r.jsx("i",{className:"ri-plant-line text-green-500"}),r.jsx("span",{className:"font-medium text-gray-700",children:"Fibra"})]}),(0,r.jsxs)("p",{className:"text-xl font-bold text-green-600 mb-1",children:[s.fiber,"g"]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mb-3",children:["de ",s.target_fiber,"g"]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-3",children:r.jsx("div",{className:"bg-gradient-to-r from-green-400 to-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${getProgressWidth(s.fiber,s.target_fiber)}%`}})}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>updateFiber(5),className:"flex-1 bg-green-500 text-white py-2 rounded-xl text-sm font-medium",children:"+5g"}),r.jsx("button",{onClick:()=>updateFiber(-5),className:"flex-1 border border-gray-300 text-gray-600 py-2 rounded-xl text-sm font-medium",children:"-5g"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Comidas del D\xeda"}),(0,r.jsxs)(n(),{href:"/food-search",className:"flex items-center space-x-2 px-4 py-2 bg-blue-500 text-white rounded-xl text-sm font-medium",children:[r.jsx("i",{className:"ri-add-line"}),r.jsx("span",{children:"Agregar"})]})]}),0===o.length?(0,r.jsxs)("div",{className:"text-center py-8",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full mx-auto mb-4 flex items-center justify-center",children:r.jsx("i",{className:"ri-restaurant-line text-gray-400 text-2xl"})}),r.jsx("p",{className:"text-gray-600 font-medium mb-1",children:"No hay comidas registradas"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Agrega tu primera comida para ver el resumen"})]}):r.jsx("div",{className:"space-y-3",children:o.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx("i",{className:"ri-restaurant-line text-blue-500"})}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"font-medium text-gray-800 text-sm",children:e.food_name}),r.jsx("div",{className:"text-xs text-gray-500",children:new Date(e.consumed_at).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"text-sm font-medium text-gray-600",children:[e.calories," kcal"]}),(0,r.jsxs)("div",{className:"text-xs text-gray-400",children:["P: ",e.protein,"g • C: ",e.carbs,"g • G: ",e.fat,"g"]})]})]},t))})]})]}),r.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200",children:(0,r.jsxs)("div",{className:"grid grid-cols-5 py-2",children:[(0,r.jsxs)(n(),{href:"/",className:"flex flex-col items-center justify-center py-2",children:[r.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:r.jsx("i",{className:"ri-home-line text-gray-400 text-lg"})}),r.jsx("span",{className:"text-xs text-gray-400 mt-1",children:"Home"})]}),(0,r.jsxs)(n(),{href:"/nutrition",className:"flex flex-col items-center justify-center py-2",children:[r.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:r.jsx("i",{className:"ri-pie-chart-fill text-blue-500 text-lg"})}),r.jsx("span",{className:"text-xs text-blue-500 mt-1",children:"Nutrition"})]}),(0,r.jsxs)(n(),{href:"/food-search",className:"flex flex-col items-center justify-center py-2",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center",children:r.jsx("i",{className:"ri-add-line text-white text-lg"})}),r.jsx("span",{className:"text-xs text-transparent mt-1",children:"Add"})]}),(0,r.jsxs)(n(),{href:"/reports",className:"flex flex-col items-center justify-center py-2",children:[r.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:r.jsx("i",{className:"ri-line-chart-line text-gray-400 text-lg"})}),r.jsx("span",{className:"text-xs text-gray-400 mt-1",children:"Progress"})]}),(0,r.jsxs)(n(),{href:"/profile",className:"flex flex-col items-center justify-center py-2",children:[r.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:r.jsx("i",{className:"ri-user-line text-gray-400 text-lg"})}),r.jsx("span",{className:"text-xs text-gray-400 mt-1",children:"Profile"})]})]})})]})}},93727:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>o});var r=s(95153);let a=(0,r.createProxy)(String.raw`C:\Users\biges\OneDrive\Escritorio\profitnessapp\app\app\nutrition\page.tsx`),{__esModule:i,$$typeof:n}=a,l=a.default,o=l},57114:(e,t,s)=>{e.exports=s(4979)}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[621,825,539],()=>__webpack_exec__(37500));module.exports=s})();