(()=>{var e={};e.id=34,e.ids=[34],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},57310:e=>{"use strict";e.exports=require("url")},73423:e=>{e.exports={style:{fontFamily:"'__Inter_e8ce0c', '__Inter_Fallback_e8ce0c'",fontStyle:"normal"},className:"__className_e8ce0c",variable:"__variable_e8ce0c"}},14880:e=>{e.exports={style:{fontFamily:"'__Pacifico_5f64cf', '__Pacifico_Fallback_5f64cf'",fontWeight:400,fontStyle:"normal"},className:"__className_5f64cf",variable:"__variable_5f64cf"}},72535:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>c});var s=t(67096),r=t(16132),l=t(37284),i=t.n(l),n=t(32564),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(a,o);let c=["",{children:["app",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,88417)),"C:\\Users\\biges\\OneDrive\\Escritorio\\profitnessapp\\app\\app\\profile\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,64771)),"C:\\Users\\biges\\OneDrive\\Escritorio\\profitnessapp\\app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,42624)),"C:\\Users\\biges\\OneDrive\\Escritorio\\profitnessapp\\app\\app\\not-found.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,35345)),"C:\\Users\\biges\\OneDrive\\Escritorio\\profitnessapp\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,44293)),"C:\\Users\\biges\\OneDrive\\Escritorio\\profitnessapp\\app\\not-found.tsx"]}],d=["C:\\Users\\biges\\OneDrive\\Escritorio\\profitnessapp\\app\\app\\profile\\page.tsx"],m="/app/profile/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/app/profile/page",pathname:"/app/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},21471:(e,a,t)=>{Promise.resolve().then(t.bind(t,56065))},56065:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>ProfilePage});var s=t(30784),r=t(9885),l=t(11440),i=t.n(l);!function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}();var n=t(57114);function ProfilePage(){let[e,a]=(0,r.useState)({name:"",age:"",height:"",weight:"",gender:"female",activity_level:"moderate",goal:"maintain"}),[t,l]=(0,r.useState)(0),[o,c]=(0,r.useState)(!0),[d,m]=(0,r.useState)(!1),[x,u]=(0,r.useState)(null),[p,g]=(0,r.useState)(""),[h,f]=(0,r.useState)({last_period:"",cycle_length:28,period_length:5,tracking_enabled:!1}),[b,v]=(0,r.useState)([]),[j,y]=(0,r.useState)([]),N=(0,n.useRouter)();(0,r.useEffect)(()=>{initializeUser()},[]),(0,r.useEffect)(()=>{if(e.height&&e.weight){let a=parseFloat(e.height)/100,t=parseFloat(e.weight),s=t/(a*a);l(isNaN(s)?0:s)}},[e.height,e.weight]);let initializeUser=async()=>{try{let e=await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}())();if(!e){N.push("/auth");return}u(e),e&&(await loadUserProfile(e.id),await loadCycleData(e.id),await loadRestDays(e.id))}catch(e){console.error("Error initializing user:",e),g("Error de conexi\xf3n. Por favor intenta nuevamente.")}finally{c(!1)}},loadUserProfile=async e=>{try{let t=(await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).auth.getSession()).data.session?.access_token,s=await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}())("user-profile",{action:"get_profile",userId:e},t);s.user&&a({name:s.user.name||"",age:s.user.age?.toString()||"",height:s.user.height?.toString()||"",weight:s.user.weight?.toString()||"",gender:s.user.gender||"female",activity_level:s.user.activity_level||"moderate",goal:s.user.goal||"maintain"})}catch(e){console.error("Error loading profile:",e)}},loadCycleData=async e=>{try{let{data:a,error:t}=await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("menstrual_cycle").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(1);a&&a[0]&&f({last_period:a[0].last_period||"",cycle_length:a[0].cycle_length||28,period_length:a[0].period_length||5,tracking_enabled:a[0].tracking_enabled||!1})}catch(e){console.error("Error loading cycle data:",e)}},loadRestDays=async e=>{try{let{data:a,error:t}=await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("rest_days").select("*").eq("user_id",e);a&&(v(a),y(a.map(e=>e.day_of_week)))}catch(e){console.error("Error loading rest days:",e)}},handleSave=async()=>{if(x)try{m(!0),g("");let a=(await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).auth.getSession()).data.session?.access_token,t=await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}())("user-profile",{action:"update_profile",userId:x.id,profileData:{name:e.name,age:parseInt(e.age)||null,height:parseFloat(e.height)||null,weight:parseFloat(e.weight)||null,gender:e.gender,activity_level:e.activity_level,goal:e.goal}},a);if("female"===e.gender&&await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("menstrual_cycle").upsert({user_id:x.id,last_period:h.last_period||null,cycle_length:h.cycle_length,period_length:h.period_length,tracking_enabled:h.tracking_enabled},{onConflict:"user_id"}),await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("rest_days").delete().eq("user_id",x.id),j.length>0){let e=j.map(e=>({user_id:x.id,day_of_week:e}));await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}()).from("rest_days").insert(e)}t.success&&(g("✓ Perfil guardado correctamente"),setTimeout(()=>g(""),3e3))}catch(e){console.error("Error saving profile:",e),g("Error al guardar. Intenta nuevamente."),setTimeout(()=>g(""),3e3)}finally{m(!1)}},handleSignOut=async()=>{try{await Object(function(){var e=Error("Cannot find module '@/lib/supabase'");throw e.code="MODULE_NOT_FOUND",e}())(),N.push("/auth")}catch(e){console.error("Error signing out:",e)}},toggleRestDay=e=>{y(a=>a.includes(e)?a.filter(a=>a!==e):[...a,e])},getBmiCategory=e=>e<18.5?{text:"Bajo peso",color:"text-blue-500"}:e<25?{text:"Peso normal",color:"text-green-500"}:e<30?{text:"Sobrepeso",color:"text-yellow-500"}:{text:"Obesidad",color:"text-red-500"},getNextPeriod=()=>{if(!h.last_period)return null;let e=new Date(h.last_period),a=new Date(e.getTime()+864e5*h.cycle_length);return a};return o?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-purple-200 border-t-purple-500 rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Cargando perfil..."})]})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50",children:[s.jsx("div",{className:"fixed top-0 left-0 right-0 glass z-20 safe-top",children:(0,s.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[s.jsx(i(),{href:"/",className:"w-8 h-8 flex items-center justify-center",children:s.jsx("i",{className:"ri-arrow-left-line text-gray-600 text-xl"})}),s.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:"Mi Perfil"})]}),s.jsx("button",{onClick:handleSave,disabled:d,className:"btn-primary text-sm",children:d?"Guardando...":"Guardar"})]})}),(0,s.jsxs)("div",{className:"pt-24 pb-24 px-4",children:[p&&s.jsx("div",{className:`mb-4 p-3 rounded-xl text-center font-medium ${p.includes("✓")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:p}),x&&s.jsx("div",{className:"card mb-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx("i",{className:"ri-user-fill text-green-500 text-xl"})}),(0,s.jsxs)("div",{children:[s.jsx("div",{className:"font-semibold text-gray-800",children:x.user_metadata?.full_name||e.name||x.email}),s.jsx("div",{className:"text-sm text-gray-500",children:"Cuenta sincronizada"})]})]}),s.jsx("button",{onClick:handleSignOut,className:"text-sm text-red-600 hover:text-red-700 font-medium",children:"Cerrar sesi\xf3n"})]})}),(0,s.jsxs)("div",{className:"card mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Informaci\xf3n Personal"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre"}),s.jsx("input",{type:"text",value:e.name,onChange:t=>a({...e,name:t.target.value}),className:"form-input",placeholder:"Tu nombre"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Edad"}),s.jsx("input",{type:"number",value:e.age,onChange:t=>a({...e,age:t.target.value}),className:"form-input",placeholder:"25"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"G\xe9nero"}),(0,s.jsxs)("select",{value:e.gender,onChange:t=>a({...e,gender:t.target.value}),className:"form-input",children:[s.jsx("option",{value:"female",children:"Femenino"}),s.jsx("option",{value:"male",children:"Masculino"}),s.jsx("option",{value:"other",children:"Otro"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Altura (cm)"}),s.jsx("input",{type:"number",value:e.height,onChange:t=>a({...e,height:t.target.value}),className:"form-input",placeholder:"165"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Peso (kg)"}),s.jsx("input",{type:"number",value:e.weight,onChange:t=>a({...e,weight:t.target.value}),className:"form-input",placeholder:"65"})]})]}),t>0&&s.jsx("div",{className:"bg-purple-50 rounded-xl p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("div",{className:"text-sm text-gray-600",children:"\xcdndice de Masa Corporal (IMC)"}),s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:t.toFixed(1)})]}),s.jsx("div",{className:`font-medium ${getBmiCategory(t).color}`,children:getBmiCategory(t).text})]})})]})]}),(0,s.jsxs)("div",{className:"card mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Objetivo"}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{value:"lose",label:"Perder Peso",icon:"ri-arrow-down-line",color:"text-red-500"},{value:"maintain",label:"Mantener Peso",icon:"ri-pause-line",color:"text-blue-500"},{value:"gain",label:"Ganar Peso",icon:"ri-arrow-up-line",color:"text-green-500"}].map(t=>(0,s.jsxs)("button",{onClick:()=>a({...e,goal:t.value}),className:`p-4 rounded-xl border-2 transition-all ${e.goal===t.value?"border-purple-300 bg-purple-50":"border-gray-200 bg-gray-50"}`,children:[s.jsx("div",{className:`w-8 h-8 mx-auto mb-2 flex items-center justify-center ${e.goal===t.value?t.color:"text-gray-400"}`,children:s.jsx("i",{className:`${t.icon} text-xl`})}),s.jsx("div",{className:`text-xs font-medium ${e.goal===t.value?"text-purple-600":"text-gray-600"}`,children:t.label})]},t.value))})]}),(0,s.jsxs)("div",{className:"card mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Nivel de Actividad"}),s.jsx("div",{className:"space-y-3",children:[{value:"sedentary",label:"Sedentario",description:"Poco o ning\xfan ejercicio"},{value:"light",label:"Ligero",description:"Ejercicio ligero 1-3 d\xedas/semana"},{value:"moderate",label:"Moderado",description:"Ejercicio moderado 3-5 d\xedas/semana"},{value:"active",label:"Activo",description:"Ejercicio intenso 6-7 d\xedas/semana"},{value:"very_active",label:"Muy Activo",description:"Ejercicio muy intenso, trabajo f\xedsico"}].map(t=>(0,s.jsxs)("button",{onClick:()=>a({...e,activity_level:t.value}),className:`w-full p-4 rounded-xl border-2 text-left transition-all ${e.activity_level===t.value?"border-purple-300 bg-purple-50":"border-gray-200 bg-gray-50"}`,children:[s.jsx("div",{className:`font-medium ${e.activity_level===t.value?"text-purple-600":"text-gray-800"}`,children:t.label}),s.jsx("div",{className:"text-sm text-gray-500 mt-1",children:t.description})]},t.value))})]}),(0,s.jsxs)("div",{className:"card mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"D\xedas de Descanso"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Selecciona los d\xedas que prefieres descansar del ejercicio"}),s.jsx("div",{className:"grid grid-cols-7 gap-2",children:[{value:"monday",label:"Lun"},{value:"tuesday",label:"Mar"},{value:"wednesday",label:"Mi\xe9"},{value:"thursday",label:"Jue"},{value:"friday",label:"Vie"},{value:"saturday",label:"S\xe1b"},{value:"sunday",label:"Dom"}].map(e=>s.jsx("button",{onClick:()=>toggleRestDay(e.value),className:`p-3 rounded-xl border-2 text-center transition-all ${j.includes(e.value)?"border-blue-300 bg-blue-50 text-blue-600":"border-gray-200 bg-gray-50 text-gray-600"}`,children:s.jsx("div",{className:"font-medium text-sm",children:e.label})},e.value))})]}),"female"===e.gender&&(0,s.jsxs)("div",{className:"card",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Seguimiento del Ciclo Menstrual"}),s.jsx("button",{onClick:()=>f({...h,tracking_enabled:!h.tracking_enabled}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${h.tracking_enabled?"bg-pink-500":"bg-gray-200"}`,children:s.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${h.tracking_enabled?"translate-x-6":"translate-x-1"}`})})]}),h.tracking_enabled&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha del \xfaltimo per\xedodo"}),s.jsx("input",{type:"date",value:h.last_period,onChange:e=>f({...h,last_period:e.target.value}),className:"form-input"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duraci\xf3n del ciclo (d\xedas)"}),s.jsx("input",{type:"number",value:h.cycle_length,onChange:e=>f({...h,cycle_length:parseInt(e.target.value)||28}),className:"form-input",min:"21",max:"35"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duraci\xf3n del per\xedodo (d\xedas)"}),s.jsx("input",{type:"number",value:h.period_length,onChange:e=>f({...h,period_length:parseInt(e.target.value)||5}),className:"form-input",min:"3",max:"8"})]})]}),getNextPeriod()&&s.jsx("div",{className:"bg-pink-50 rounded-xl p-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx("i",{className:"ri-calendar-line text-pink-500"}),(0,s.jsxs)("div",{children:[s.jsx("div",{className:"text-sm text-gray-600",children:"Pr\xf3ximo per\xedodo estimado"}),s.jsx("div",{className:"font-semibold text-pink-600",children:getNextPeriod()?.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]})})]})]}),(0,s.jsxs)("div",{className:"card mt-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Acciones R\xe1pidas"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)(i(),{href:"/manual-macros",className:"p-4 rounded-xl bg-green-50 border border-green-200 hover:bg-green-100 transition-colors",children:[s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mb-2",children:s.jsx("i",{className:"ri-edit-line text-green-500"})}),s.jsx("div",{className:"text-sm font-medium text-green-700",children:"Ajustar Metas"}),s.jsx("div",{className:"text-xs text-green-600",children:"Personalizar macronutrientes"})]}),(0,s.jsxs)(i(),{href:"/reports",className:"p-4 rounded-xl bg-blue-50 border border-blue-200 hover:bg-blue-100 transition-colors",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mb-2",children:s.jsx("i",{className:"ri-bar-chart-line text-blue-500"})}),s.jsx("div",{className:"text-sm font-medium text-blue-700",children:"Ver Reportes"}),s.jsx("div",{className:"text-xs text-blue-600",children:"Progreso y estad\xedsticas"})]})]})]})]}),s.jsx("div",{className:"fixed bottom-0 left-0 right-0 glass border-t border-gray-200/50 safe-bottom",children:(0,s.jsxs)("div",{className:"grid grid-cols-5 py-2",children:[(0,s.jsxs)(i(),{href:"/",className:"flex flex-col items-center justify-center py-2",children:[s.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:s.jsx("i",{className:"ri-home-line nav-inactive text-lg"})}),s.jsx("span",{className:"text-xs nav-inactive mt-1",children:"Inicio"})]}),(0,s.jsxs)(i(),{href:"/nutrition",className:"flex flex-col items-center justify-center py-2",children:[s.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:s.jsx("i",{className:"ri-restaurant-line nav-inactive text-lg"})}),s.jsx("span",{className:"text-xs nav-inactive mt-1",children:"Comida"})]}),s.jsx(i(),{href:"/scan",className:"flex flex-col items-center justify-center py-2",children:s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-green-600 rounded-full flex items-center justify-center shadow-lg",children:s.jsx("i",{className:"ri-qr-scan-2-line text-white text-lg"})})}),(0,s.jsxs)(i(),{href:"/reports",className:"flex flex-col items-center justify-center py-2",children:[s.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:s.jsx("i",{className:"ri-bar-chart-line nav-inactive text-lg"})}),s.jsx("span",{className:"text-xs nav-inactive mt-1",children:"Reportes"})]}),(0,s.jsxs)(i(),{href:"/profile",className:"flex flex-col items-center justify-center py-2",children:[s.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:s.jsx("i",{className:"ri-user-fill nav-active text-lg"})}),s.jsx("span",{className:"text-xs nav-active mt-1",children:"Perfil"})]})]})})]})}},88417:(e,a,t)=>{"use strict";t.r(a),t.d(a,{$$typeof:()=>i,__esModule:()=>l,default:()=>o});var s=t(95153);let r=(0,s.createProxy)(String.raw`C:\Users\biges\OneDrive\Escritorio\profitnessapp\app\app\profile\page.tsx`),{__esModule:l,$$typeof:i}=r,n=r.default,o=n},57114:(e,a,t)=>{e.exports=t(4979)}};var a=require("../../../webpack-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),t=a.X(0,[621,825,539],()=>__webpack_exec__(72535));module.exports=t})();